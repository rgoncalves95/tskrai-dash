{"version":3,"sources":["store/tasks/actionTypes.ts","store/tasktypes/actionTypes.ts","global.ts","store/tasks/actionsCreator.ts","pages/props/tasks/taskListProps.ts","pages/tasks/helpers.tsx","pages/tasks/TaskList.tsx","store/tasktypes/actionsCreator.ts","store/plan/actionTypes.ts","pages/props/tasktypes/taskTypeProps.ts","pages/props/tasktypes/taskTypeListProps.ts","pages/tasks/TaskTypeList.tsx","pages/plans/PlanList.tsx","store/plan/actionsCreator.ts","store/users/actionTypes.ts","pages/props/plan/planProps.ts","pages/plans/CreatePlanStep.tsx","pages/plans/FilterTasksStep.tsx","pages/plans/SelectTasksStep.tsx","pages/plans/Plan.tsx","store/users/actionsCreator.ts","pages/users/UserList.tsx","pages/map/MapView.jsx","pages/tasks/NewTask.tsx","pages/tasks/TaskType.tsx","routing/routes.ts","App.tsx","assets/ruisilva.jpeg","reportWebVitals.ts","store/tasks/reducer.ts","store/users/reducer.ts","store/tasktypes/reducer.ts","store/plan/reducer.ts","store/reducer.ts","store/store.ts","index.tsx"],"names":["ActionType","globalSettings","setLoadingState","loading","dispatch","a","type","SET_LOADING","payload","deleteTask","task","onError","console","log","address","id","axios","delete","result","DELETE_TASK","getTasks","pageIndex","pageSize","get","params","data","tasks","items","map","index","key","totalCount","GET_TASKS","taskListConnector","connect","state","taskState","tasksReducer","bindActionCreators","confirm","Modal","showDeleteConfirm","onOkDelete","onCancelDelete","description","title","icon","ExclamationCircleOutlined","content","onOk","onCancel","showError","error","args","message","duration","notification","showOperationSuccess","success","TaskList","onShowDeleteConfirm","props","onEditTask","history","push","onNewTask","err","onPageChanged","page","Columns","dataIndex","ellipsis","render","text","moment","format","width","record","size","onClick","this","length","col","dataSource","columns","sticky","offsetHeader","pagination","showSizeChanger","onChange","current","total","showTotal","pageSizeOptions","position","style","paddingLeft","paddingRight","className","subTitle","extra","renderView","React","Component","withRouter","deleteTaskType","taskType","DELETE_TASK_TYPE","upsertTaskType","onSuccess","put","post","UPSERT_TASK_TYPE","getTaskTypes","GET_TASK_TYPES","taskTypeconnector","taskTypesState","taskTypesReducer","taskTypesListConnector","TaskTypeList","tasktype","onEditTaskType","onNewTaskType","taskTypes","PlanList","onNewPlan","createPlan","date","createPlanRequest","taskIds","t","locationId","maxTimeForPlan","maxNumberOfTasks","assigneeId","supervisorId","CREATE_PLAN","planRoute","name","forEach","arrivalDateValue","Date","arrivalDate","dueDateValue","dueDate","failed","findIndex","typeId","startDate","endDate","intervalStart","toDateString","intervalEnd","addSelectedTasks","ADD_TASKS","deleteTasks","DELETE_TASKS","mapStateToProps","planState","planReducer","currentStep","filterTasksConnector","selectTasksConnector","createPlanConnector","planConnector","selectedRowKeys","onSelectChange","setState","planRoutes","selectedTasks","route","find","r","Item","color","displayName","toLocaleTimeString","rowSelection","background","span","rowKey","marginTop","renderTimeLine","Option","Select","formRef","createRef","onFinish","values","taskTypeId","toDate","firstTaskType","undefined","dateFormat","labelCol","wrapperCol","initialValues","utc","ref","gutter","xs","sm","md","lg","label","rules","required","value","showTime","htmlType","availableTasks","loc","alias","nextTargetKeys","direction","moveKeys","targetTasksKey","k","toString","sourceSelectedKeys","targetSelectedKeys","selectedTasksKey","sourceTasks","transferItems","location","selectedItems","targetKeys","selectedKeys","titles","item","Step","Steps","Plan","goBack","onNext","onPrevious","nextButtonDisableState","steps","match","onBack","disabled","margin","getUsers","availabilityStartDate","availabilityEndDate","latitude","longitude","GET_USERS","user","users","usersReducer","mapDispatchToProps","UserList","MAPBOX_TOKEN","MapView","viewport","height","zoom","searchResultLayer","mapRef","geocoderContainerRef","resize","handleViewportChange","handleGeocoderViewportChange","transitionDuration","createResult","eventResult","door","context","element","startsWith","zipCode","locality","city","country","place_name","street","geometry","coordinates","handleOnResult","event","onLocationSelected","GeoJsonLayer","getFillColor","getRadius","pointRadiusMinPixels","pointRadiusMaxPixels","window","addEventListener","removeEventListener","display","alignItems","onViewportChange","mapboxApiAccessToken","containerRef","onResult","layers","initialTaskModel","notes","momentDuration","minutes","momentDate","momentDueDate","NewTask","deboucedSearch","debounce","onFetchLocation","trim","fullLocationOptions","locationOptions","then","locations","userDefinedLocations","catch","showSearchLocation","showModalLocation","createIdForLocation","Math","min","apply","closeSearchLocation","newLocation","floor","userAlias","selectedLocation","onChangeLocationFloor","target","onChangeLocationUserAlias","findLocation","locationValueType","toNumber","hours","response","errorMessage","getTask","onTaskFetched","resetFields","placeholder","options","allowClear","labelInValue","showSearch","onSearch","showArrow","newValue","dropdownRender","menu","flexWrap","padding","centered","visible","readOnly","minuteStep","autoSize","minRows","maxRows","initialTaskTypeModel","cost","TaskType","getTaskType","onTaskTypeFetched","RootPath","RouteTaskList","RouteTaskEdit","RouteTaskTypeList","RouteTaskTypeEdit","RouteUserList","RoutePlanList","RoutePlanEdit","Header","Layout","Content","Sider","SubMenu","Menu","App","currentLocation","pathname","useLocation","zIndex","textAlign","marginRight","count","src","top","overflow","left","theme","mode","AppstoreOutlined","to","UserOutlined","DeploymentUnitOutlined","marginLeft","exact","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","reducer","action","ADD_TASK","filter","found","concat","Array","from","Set","ids","indexOf","reducers","combineReducers","store","createStore","applyMiddleware","thunk","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.68fdd830.chunk.js","sourcesContent":["import { ILocation } from \"../locations/location\";\r\n\r\nexport enum ActionType {\r\n  ADD_TASK = 'add_task',\r\n  GET_TASKS = 'get_tasks',\r\n  DELETE_TASK = 'delete_task',\r\n  SET_LOADING = 'loading_task',\r\n}\r\n\r\nexport interface ITask {\r\n  id:number,\r\n  key: number,\r\n  name: string\r\n  typeId: number\r\n  location: ILocation | undefined,\r\n  date: Date\r\n  dueDate: Date\r\n  duration: number\r\n  notes: string | undefined\r\n}\r\n\r\nexport type TasksState = {\r\n  tasks : ITask[],\r\n  totalCount: number,\r\n  pageSize : number,\r\n  pageIndex : number,\r\n  loading: boolean\r\n}\r\n  ","export enum ActionType {\n  GET_TASK_TYPES = 'get_task_types',\n  UPSERT_TASK_TYPE = 'upsert_task_type',\n  DELETE_TASK_TYPE = 'delete_task_type',\n  SET_LOADING = 'loading_task_type',\n}\n\nexport interface ITaskType {\n  key: number,\n  id: number,\n  name: string,\n  cost : number,\n  duration: number\n}\n\nexport type TaskTypeState = {\n  taskTypes : ITaskType[],\n  totalCount: number,\n  pageSize : number,\n  pageIndex : number,\n  loading: boolean\n}\n      ","interface IGlobalSettings {\n    ApiAdress: string\n}\n\nexport const globalSettings : IGlobalSettings = {\n    ApiAdress: 'https://tskrai-api.azurewebsites.net/'\n}\n\n","import { ActionType, ITask } from \"./actionTypes\"\r\nimport { Dispatch } from 'redux';\r\nimport axios from 'axios';\r\nimport { globalSettings} from '../../global'\r\n\r\n  \r\n  export type AddTaskAction = {\r\n    type: ActionType.ADD_TASK\r\n    payload: ITask\r\n  }\r\n\r\n  export type GetTaskPayload = {\r\n    tasks : ITask[],\r\n    totalCount: number,\r\n    pageSize : number,\r\n    pageIndex : number\r\n  }\r\n\r\n  export type LoadingTaskAction = {\r\n    type: ActionType.SET_LOADING,\r\n    payload: boolean\r\n  }\r\n  export type GetTasksAction = {\r\n    type: ActionType.GET_TASKS\r\n    payload: GetTaskPayload\r\n  }\r\n\r\n  export type DeleteTaskAction = {\r\n    type: ActionType.DELETE_TASK,\r\n    payload: number\r\n  }\r\n  \r\n  \r\nexport type Action =\r\n    | AddTaskAction\r\n    | GetTasksAction\r\n    | DeleteTaskAction\r\n    | LoadingTaskAction;\r\n\r\n\r\nexport const setLoadingState = (loading: boolean) => {\r\n    return async (dispatch: Dispatch<Action>) => {\r\n        dispatch({\r\n            type: ActionType.SET_LOADING,\r\n            payload : loading\r\n        });\r\n    }\r\n}\r\n\r\nexport const deleteTask = (task: ITask, onError : (err: any) => void) => {\r\n    return async (dispatch: Dispatch<Action>) => {\r\n        dispatch({\r\n          type: ActionType.SET_LOADING,\r\n          payload : true\r\n        });\r\n        try {\r\n          console.log(task);\r\n          const address =`${globalSettings.ApiAdress}tasks/${task.id}`;\r\n          const result = await axios.delete(address);\r\n          console.log(result);\r\n          dispatch({\r\n              type: ActionType.DELETE_TASK,\r\n              payload: task.id\r\n          });\r\n        }\r\n        catch(err) {\r\n          dispatch({\r\n            type: ActionType.SET_LOADING,\r\n            payload : false\r\n          });\r\n          onError(err);\r\n        }\r\n    }\r\n}\r\n\r\nexport const getTasks = (pageIndex: number, pageSize: number) => {\r\n  return async (dispatch: Dispatch<Action>) => {\r\n    try {\r\n        const { data } = await axios.get(`${globalSettings.ApiAdress}tasks`,{\r\n          params: {\r\n            pageSize: pageSize,\r\n            pageIndex: pageIndex\r\n         }\r\n        });\r\n\r\n        const payload = {\r\n          tasks : data.items.map((task :ITask, index: number) => { \r\n              task.key = index;\r\n              return task;\r\n            }),\r\n          totalCount: data.totalCount,\r\n          pageIndex: data.pageIndex,\r\n          pageSize: data.pageSize\r\n        };\r\n\r\n      /*\r\n      items: \r\n      \"indexFrom\": 0,\r\n  \"pageIndex\": 1,\r\n  \"pageSize\": 10,\r\n  \"totalCount\": 300,\r\n  \"totalPages\": 30,\r\n  \"hasPreviousPage\": true,\r\n  \"hasNextPage\": true*/\r\n\r\n        \r\n         dispatch({\r\n          type: ActionType.GET_TASKS,\r\n          payload: payload\r\n        });\r\n      } catch (err) {\r\n        console.log(err);\r\n      }    \r\n  }\r\n}\r\n\r\n","import { getTasks, deleteTask, setLoadingState } from '../../../store/tasks/actionsCreator';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { bindActionCreators} from 'redux';\r\nimport { RootState } from '../../../store/reducer';\r\n\r\nconst mapStateToProps = (state: RootState) => ( {\r\n    taskState : state.tasksReducer\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch: any) => bindActionCreators({ getTasks , deleteTask, setLoadingState }, dispatch);\r\n  \r\nexport const taskListConnector = connect(mapStateToProps, mapDispatchToProps);\r\n  \r\nexport type TaskListProps = ConnectedProps<typeof taskListConnector>;","import React from'react';\nimport { Modal, notification } from 'antd';\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\n\nconst { confirm } = Modal;\n\nexport const showDeleteConfirm = (onOkDelete: () => any,\n  onCancelDelete: () => any,\n  description: string = ''\n): void => {\n  confirm({\n    title: 'Do you Want to delete this item ?',\n    icon: <ExclamationCircleOutlined />,\n    content: description,\n    onOk : onOkDelete,\n    onCancel: onCancelDelete,\n  });\n};\n\nexport const showError = (title: string , error: string) => {\n  const args = {\n    message: title,\n    description: error,\n    duration: 0,\n  };\n  notification.error(args);\n};\n\nexport const showOperationSuccess = () => {\n  const args = {\n    message: 'Operation completed successfully.',\n    duration: 3,\n  };\n  notification.success(args);\n}","import React from 'react';\r\nimport { ITask, TasksState } from '../../store/tasks/actionTypes';\r\nimport Table from 'antd/lib/table/Table';\r\nimport { ColumnType } from 'antd/lib/table';\r\nimport { Button, PageHeader, Space } from 'antd';\r\nimport moment from 'moment';\r\nimport {withRouter, RouteComponentProps} from 'react-router-dom';\r\nimport { taskListConnector, TaskListProps } from '../props/tasks/index';\r\nimport { showDeleteConfirm, showError } from './helpers';\r\n\r\n\r\nclass TaskList extends React.Component<TaskListProps & RouteComponentProps> {\r\n\r\n    componentDidMount() {\r\n        this.props.getTasks(this.props.taskState.pageIndex, this.props.taskState.pageSize);\r\n    }\r\n\r\n    onShowDeleteConfirm = (task: ITask) => {\r\n      showDeleteConfirm( () => this.props.deleteTask(task, this.onError), () => console.log('delete') );\r\n    }\r\n\r\n    onEditTask = (task: ITask) => {\r\n      this.props.history.push('/tasklist/task/' + task.id);\r\n    }\r\n\r\n    onNewTask = () => {\r\n      this.props.history.push('/tasklist/task');\r\n    }\r\n\r\n    onError= (err: Error) => {\r\n      showError('Error deleting task', err.message);\r\n    }\r\n\r\n\r\n    onPageChanged = (page: number, pageSize?: number | undefined) : void => {\r\n      this.props.getTasks(page - 1, pageSize ?? this.props.taskState.pageSize);\r\n    }\r\n\r\n    renderView(data : TasksState ) {\r\n      console.log(data);\r\n      if (data && data.tasks.length > 0)\r\n      {\r\n        const col = this.Columns();\r\n        return(<Table dataSource={data.tasks} columns={col} \r\n          sticky={{  offsetHeader:64}} \r\n          pagination={{ \r\n            showSizeChanger: true, \r\n            onChange : this.onPageChanged,\r\n            current: data.pageIndex + 1,\r\n            pageSize : data.pageSize,\r\n            total : data.totalCount,\r\n            showTotal : (total) => `Total ${total} items `,\r\n            pageSizeOptions: ['10','20','30'],\r\n            position: [ 'bottomCenter' ]}} />);\r\n      }\r\n      else {\r\n        console.log('empty');\r\n        return(<div>Empty</div>);\r\n      }\r\n    }\r\n    \r\n    render() {\r\n      const  { taskState }   = this.props;\r\n\r\n      console.log(this.props);\r\n\r\n      return(\r\n        <div>\r\n          <PageHeader\r\n            style={{ paddingLeft: 0, paddingRight: 0}}\r\n            className=\"site-page-header\"\r\n            title=\"List of tasks\"\r\n             subTitle=\"\"\r\n            extra={[\r\n              <Button key='buttonAdd' type=\"primary\" onClick={this.onNewTask}>Add New</Button> \r\n            ]}>  \r\n        </PageHeader>\r\n          {this.renderView(taskState)}\r\n        </div>\r\n      )\r\n    }\r\n\r\n    readonly Columns = () : ColumnType<ITask>[] => { \r\n      return [\r\n        {\r\n          title: 'Name',\r\n          dataIndex: 'name',\r\n          key: 'name',\r\n          ellipsis: true,\r\n        },\r\n        {\r\n          title: 'Date',\r\n          dataIndex: 'date',\r\n          key: 'date',\r\n          ellipsis: true,\r\n          render: (text: Date) => <span>{moment(text).format('DD-MM-YYYY')}</span>,\r\n          width: 150\r\n        },\r\n        {\r\n          title: 'Due Date',\r\n          dataIndex: 'dueDate',\r\n          key: 'dueDate',\r\n          render: (text: Date) => <span>{moment(text).format('DD-MM-YYYY hh:mm')}</span>,\r\n          ellipsis: true,\r\n          width: 200\r\n        },\r\n        {\r\n          title: 'Duration',\r\n          dataIndex: 'durationInSeconds',\r\n          render: (text: number) => <span>{text / 60} min</span>,\r\n          key: 'durationInSeconds',\r\n          width: 100\r\n        },\r\n        {\r\n          title: 'Notes',\r\n          dataIndex: 'notes',\r\n          key: 'notes',\r\n          ellipsis: true,\r\n        },\r\n        {\r\n          title: '',\r\n          key: 'action',\r\n          width: 180,\r\n          render: (text, record) => (\r\n            <Space size=\"middle\">\r\n                  <Button onClick={() => this.onShowDeleteConfirm(record)} type=\"link\">Delete</Button>\r\n                  <Button onClick={() => this.onEditTask(record)} type=\"link\">Edit</Button>\r\n            </Space>\r\n          ),\r\n        },\r\n      ];\r\n    }\r\n}\r\n\r\nexport default withRouter(taskListConnector(TaskList));","import { ActionType, ITaskType } from \"./actionTypes\"\nimport { Dispatch } from 'redux';\nimport axios from 'axios';\nimport { globalSettings} from '../../global'\n\nexport type LoadingTaskTypeAction = {\n  type: ActionType.SET_LOADING,\n  payload: boolean\n}\n\nexport type DeleteTaskTypeAction = {\n  type: ActionType.DELETE_TASK_TYPE,\n  payload: number\n}\n\nexport type GetTaskTypesPayload = {\n  tasks : ITaskType[],\n  totalCount: number,\n  pageSize : number,\n  pageIndex : number\n}\n\nexport type GetTaskTypesAction = {\n  type: ActionType.GET_TASK_TYPES,\n  payload: GetTaskTypesPayload\n}\n\nexport type UpsertTaskTypeAction = {\n  type: ActionType.UPSERT_TASK_TYPE,\n  payload: ITaskType\n}\n  \nexport type Action =\n    | UpsertTaskTypeAction\n    | DeleteTaskTypeAction\n    | GetTaskTypesAction\n    | LoadingTaskTypeAction;\n\nexport const setLoadingState = (loading: boolean) => {\n  return async (dispatch: Dispatch<Action>) => {\n    dispatch({\n        type: ActionType.SET_LOADING,\n        payload : loading\n    });\n  }\n}\n\nexport const deleteTaskType = (taskType: ITaskType, onError : (err: any) => void) => {\n    return async (dispatch: Dispatch<Action>) => {\n      dispatch({\n        type: ActionType.SET_LOADING,\n        payload : true\n      });\n      try {\n        const address =`${globalSettings.ApiAdress}tasktypes/${taskType.id}`;\n        const { data } = await axios.delete(address);\n        console.log(data);\n            dispatch({\n                type: ActionType.DELETE_TASK_TYPE,\n                payload: taskType.id\n            });\n      }\n      catch(err) {\n        dispatch({\n          type: ActionType.SET_LOADING,\n          payload : false\n        });\n        onError(err);\n      }\n    }\n}\n\nexport const upsertTaskType = (taskType : ITaskType, onError : (err: any) => void, onSuccess? : () => void) => {\n    return async (dispatch: Dispatch<Action>) => {\n        dispatch({\n            type: ActionType.SET_LOADING,\n            payload : true\n        });\n        try {\n            const address = taskType.id > 0 ? `tasktypes/${taskType.id}` : 'tasktypes' ;\n            const { data } = taskType.id > 0 ? \n                await axios.put(`${globalSettings.ApiAdress}${address}`, taskType) :\n                await axios.post(`${globalSettings.ApiAdress}${address}`, taskType) ;\n\n            console.log(data);\n            dispatch({\n                type: ActionType.UPSERT_TASK_TYPE,\n                payload: data\n            });\n\n            if (onSuccess) {\n                onSuccess();\n            }\n        }\n        catch(err) {\n            dispatch({\n              type: ActionType.SET_LOADING,\n              payload : false\n            });\n            onError(err);\n        }\n    }\n}\n\nexport const getTaskTypes = (pageIndex: number, pageSize: number) => {\n  return async (dispatch: Dispatch<Action>) => {\n    try {\n      const { data } = await axios.get('https://tskrai-api.azurewebsites.net/tasktypes',{\n        params: {\n          pageSize: pageSize,\n          pageIndex: pageIndex\n        }\n      });\n      \n      const payload = {\n        tasks : data.items.map((taskType :ITaskType, index: number) => { \n            taskType.key = index;\n            return taskType;\n        }),\n        totalCount: data.totalCount,\n        pageIndex: data.pageIndex,\n        pageSize: data.pageSize\n      };\n      \n      dispatch({\n        type: ActionType.GET_TASK_TYPES,\n        payload: payload\n      });\n\n    } catch (err) {\n      console.log(err);\n    }    \n  }\n}","export enum ActionType {\r\n    GET_TASK_TYPES = 'plan_get_task_types',\r\n    GET_TASKS = 'plan_get_tasks',\r\n    ADD_TASKS = 'plan_add_tasks',\r\n    DELETE_TASKS = 'plan_delete_tasks',\r\n    SET_LOADING = 'plan_set_loading',\r\n    CREATE_PLAN = 'create_plan'\r\n}\r\n\r\nexport interface ITaskType {\r\n    key: number,\r\n    id: number,\r\n    name: string,\r\n}\r\n\r\nexport interface ITask {\r\n    id:number,\r\n    key: number,\r\n    name: string\r\n    location: ILocation | undefined,\r\n    dueDate: Date\r\n    duration: number\r\n}\r\n\r\nexport interface ILocation {\r\n    id:number,\r\n    alias: string,\r\n    street: string,\r\n    door: string\r\n    latitude: string,\r\n    longitude: string,\r\n}\r\n  \r\nexport interface IPlanTask {\r\n    displayName: string,\r\n    order: number,\r\n    dueDate: string,\r\n    arrivalDate: string,\r\n    dueDateValue: Date,\r\n    arrivalDateValue: Date,\r\n    latitude: number,\r\n    longitude: number\r\n}\r\n\r\nexport interface IPlanRoute {\r\n    tasks : IPlanTask[],\r\n    totalDistance: number,\r\n    name: string,\r\n    failed: boolean\r\n}\r\n\r\nexport type PlanState = {\r\n    taskTypes : ITaskType[],\r\n    availableTasks: ITask[],\r\n    selectedTasks : ITask[],\r\n    loading: boolean,\r\n    taskTypeId: number,\r\n    startDate: Date,\r\n    endDate: Date,\r\n    planRoutes: IPlanRoute[]\r\n}\r\n\r\n","import { bindActionCreators } from \"redux\";\nimport { RootState } from \"../../../store/reducer\";\nimport { connect, ConnectedProps } from 'react-redux';\nimport { upsertTaskType, setLoadingState } from '../../../store/tasktypes/actionsCreator';\nimport { TaskTypeStateProps } from \"./taskTypeStateProps\";\n\nconst mapStateToProps = (state: RootState) : TaskTypeStateProps  => ( {\n    taskTypesState : state.taskTypesReducer,\n})\n\nconst mapDispatchToProps = (dispatch: any) =>\n    bindActionCreators({ upsertTaskType, setLoadingState }, dispatch);\n\nexport const taskTypeconnector = connect(mapStateToProps, mapDispatchToProps);\n  \nexport type TaskTypesProps = ConnectedProps<typeof taskTypeconnector>;","import { bindActionCreators } from \"redux\";\r\nimport { RootState } from \"../../../store/reducer\";\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { getTaskTypes, deleteTaskType, setLoadingState } from '../../../store/tasktypes/actionsCreator';\r\n\r\nconst mapStateToProps = (state: RootState) => ( {\r\n    taskTypesState : state.taskTypesReducer\r\n})\r\n  \r\nconst mapDispatchToProps = (dispatch: any) =>\r\n      bindActionCreators({ getTaskTypes, deleteTaskType, setLoadingState }, dispatch);\r\n  \r\nexport const taskTypesListConnector = connect(mapStateToProps, mapDispatchToProps);\r\n  \r\nexport type TaskTypeListProps = ConnectedProps<typeof taskTypesListConnector>;","import Table, { ColumnType } from 'antd/lib/table';\r\nimport React from 'react';\r\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\r\nimport { ITaskType } from '../../store/tasktypes/actionTypes';\r\nimport { Button, PageHeader, Space } from 'antd';\r\nimport { showDeleteConfirm, showError } from './helpers';\r\nimport { TaskTypeListProps, taskTypesListConnector } from '../props/tasktypes/index';\r\n\r\nclass TaskTypeList extends React.Component<TaskTypeListProps & RouteComponentProps> {\r\n\r\n    componentDidMount() {\r\n      this.props.getTaskTypes(this.props.taskTypesState.pageIndex, this.props.taskTypesState.pageSize);    \r\n    }\r\n\r\n    onShowDeleteConfirm = (tasktype: ITaskType) => {\r\n      showDeleteConfirm( () => this.props.deleteTaskType(tasktype, this.onError), () => console.log('delete') );\r\n    }\r\n\r\n    onPageChanged = (page: number, pageSize?: number | undefined) : void => {\r\n      this.props.getTaskTypes(page - 1, pageSize ?? this.props.taskTypesState.pageSize);\r\n    }\r\n\r\n    onEditTaskType = (tasktype: ITaskType) => {\r\n        this.props.history.push('/tasktypelist/tasktype/' + tasktype.id);\r\n    }\r\n\r\n    onNewTaskType = () => {\r\n        this.props.history.push('/tasktypelist/tasktype');\r\n    }\r\n\r\n    onError= (err: Error) => {\r\n      showError('Error deleting task type', err.message);\r\n    }\r\n\r\n    \r\n    render() {\r\n        const  { taskTypesState }   = this.props;\r\n\r\n        if (taskTypesState && taskTypesState.taskTypes.length > 0)\r\n        {\r\n          const col = this.Columns();\r\n          return(\r\n            <div>\r\n              <PageHeader\r\n                style={{ paddingLeft: 0, paddingRight: 0}}\r\n                className=\"site-page-header\"\r\n                title=\"List of task types\"\r\n                subTitle=\"\"\r\n                extra={[\r\n                  <Button key='buttonAdd' type=\"primary\" onClick={this.onNewTaskType}>Add New</Button> \r\n                ]}>  \r\n              </PageHeader>\r\n              <Table dataSource={taskTypesState.taskTypes} columns={col} \r\n                pagination={{ \r\n                showSizeChanger: true, \r\n                onChange : this.onPageChanged,\r\n                current: taskTypesState.pageIndex + 1,\r\n                pageSize : taskTypesState.pageSize,\r\n                showTotal : (total) => `Total ${total} items `,\r\n                total : taskTypesState.totalCount,\r\n                pageSizeOptions: ['10','20','30'],\r\n                position: [ 'bottomCenter' ]}} />\r\n            </div>\r\n          );\r\n        }\r\n        else {\r\n          return(<div>Empty</div>);\r\n        };\r\n    }\r\n\r\n    readonly Columns = () : ColumnType<ITaskType>[] => { \r\n        return [\r\n        {\r\n            title: 'Name',\r\n            dataIndex: 'name',\r\n            key: 'name',\r\n            ellipsis: true,\r\n        },\r\n        {\r\n            title: 'Cost',\r\n            dataIndex: 'cost',\r\n            key: 'date',\r\n            width: 150\r\n        },\r\n        {\r\n            title: 'Duration',\r\n            dataIndex: 'duration',\r\n            render: (text: number) => <span>{text / 60} min</span>,\r\n            key: 'duration',\r\n            width: 100\r\n        },\r\n        {\r\n            title: '',\r\n            key: 'action',\r\n            width: 180,\r\n            render: (text, record) => (\r\n            <Space size=\"middle\">\r\n                <Button onClick={() => this.onShowDeleteConfirm(record)} type=\"link\">Delete</Button>\r\n                <Button onClick={() => this.onEditTaskType(record)} type=\"link\">Edit</Button>\r\n            </Space>\r\n            ),\r\n        },\r\n        ];\r\n    }\r\n}\r\n\r\nexport default withRouter(taskTypesListConnector(TaskTypeList));","import React from 'react';\r\nimport { Button, PageHeader } from 'antd';\r\nimport { RouteComponentProps } from 'react-router-dom';\r\n\r\nexport default class PlanList extends React.Component<RouteComponentProps> {\r\n\r\n    onNewPlan = () => {\r\n        this.props.history.push('/planlist/plan');\r\n    }\r\n    \r\n    render() {\r\n        return(\r\n            <div>\r\n                <PageHeader\r\n                    style={{ paddingLeft: 0, paddingRight: 0}}\r\n                    className=\"site-page-header\"\r\n                    title=\"List of plans\"\r\n                    subTitle=\"\"\r\n                    extra={[\r\n                       <Button key='buttonAdd' type=\"primary\" onClick={this.onNewPlan}>Add New</Button> \r\n                    ]}>  \r\n                </PageHeader>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import { ActionType, ITaskType, ITask, IPlanRoute, IPlanTask } from \"./actionTypes\"\r\nimport { Dispatch } from 'redux';\r\nimport axios from 'axios';\r\nimport { globalSettings} from '../../global'\r\n\r\n\r\nexport type SetLoadingAction = {\r\n    type: ActionType.SET_LOADING,\r\n    payload: boolean\r\n}\r\n  \r\nexport type GetTasksAction = {\r\n    type: ActionType.GET_TASKS,\r\n    payload:  ITask[]\r\n}\r\n  \r\nexport type GetTaskTypesAction = {\r\n    type: ActionType.GET_TASK_TYPES,\r\n    payload:  ITaskType[]\r\n}\r\n\r\nexport type AddTasksAction = {\r\n    type: ActionType.ADD_TASKS,\r\n    payload:  ITask[]\r\n}\r\n\r\nexport type DeleteTasksAction = {\r\n    type: ActionType.DELETE_TASKS,\r\n    payload:  ITask[]\r\n}\r\n\r\nexport type CreatePlanAction = {\r\n    type: ActionType.CREATE_PLAN,\r\n    payload: IPlanRoute[]\r\n}\r\n\r\nexport type Action =\r\n    | SetLoadingAction\r\n    | GetTasksAction\r\n    | GetTaskTypesAction\r\n    | AddTasksAction\r\n    | DeleteTasksAction\r\n    | CreatePlanAction;\r\n\r\nexport const setLoadingState = (loading: boolean) => {\r\n    return async (dispatch: Dispatch<Action>) => {\r\n        dispatch({\r\n            type: ActionType.SET_LOADING,\r\n            payload : loading\r\n        });\r\n    }\r\n}\r\n\r\nexport const createPlan = (tasks : ITask[], date: Date, onError : (err: any) => void, onSuccess? : () => void) => {\r\n    return async (dispatch: Dispatch<Action>) => {\r\n        dispatch({\r\n            type: ActionType.SET_LOADING,\r\n            payload : true\r\n        });\r\n        try {\r\n            const createPlanRequest = {\r\n                taskIds: tasks.map(t => t.id),\r\n                locationId : 0,\r\n                maxTimeForPlan : 0,\r\n                maxNumberOfTasks: 0,\r\n                assigneeId : 0,\r\n                supervisorId : 0,\r\n                date: date\r\n            }\r\n\r\n            const { data } = await axios.post(`${globalSettings.ApiAdress}Plans`, createPlanRequest) ;\r\n\r\n\r\n            dispatch({\r\n                type: ActionType.CREATE_PLAN,\r\n                payload: data.map((planRoute: IPlanRoute, index:number) => {\r\n                    planRoute.name = 'route ' + index;\r\n                    planRoute.tasks.forEach(t=> {\r\n                        t.arrivalDateValue = new Date(t.arrivalDate);\r\n                        t.dueDateValue = new Date(t.dueDate);\r\n                    })\r\n                    planRoute.failed = planRoute.tasks.findIndex((t: IPlanTask) => t.arrivalDateValue > t.dueDateValue) > 0;\r\n                    return planRoute;\r\n                })\r\n            });\r\n\r\n            if (onSuccess) {\r\n                onSuccess();\r\n            }\r\n        }\r\n        catch(err) {\r\n            dispatch({\r\n              type: ActionType.SET_LOADING,\r\n              payload : false\r\n            });\r\n            onError(err);\r\n        }\r\n    }\r\n}\r\n\r\nexport const getTaskTypes = () => {\r\n    return async (dispatch: Dispatch<Action>) => {\r\n        try {\r\n            const { data } = await axios.get(`${globalSettings.ApiAdress}tasktypes`);\r\n            const payload = data.items.map((taskType :ITaskType, index: number) => { \r\n                  taskType.key = index;\r\n                  return taskType;\r\n              });\r\n            \r\n            dispatch({\r\n              type: ActionType.GET_TASK_TYPES,\r\n              payload: payload\r\n            });\r\n      \r\n        } catch (err) {\r\n            console.log(err);\r\n        }    \r\n    }\r\n}\r\n\r\nexport const getTasks = (typeId: number, startDate: Date, endDate: Date) => {\r\n    return async (dispatch: Dispatch<Action>) => {\r\n        try {\r\n            const { data } = await axios.get(`${globalSettings.ApiAdress}tasks`,{\r\n                params: {\r\n                  pageSize: 30,\r\n                  type: typeId,\r\n                  intervalStart: startDate.toDateString(),\r\n                  intervalEnd: endDate.toDateString(),\r\n               }\r\n            });\r\n\r\n            const payload = data.items.map((task :ITask, index: number) => { \r\n                  task.key = index;\r\n                  return task;\r\n            });\r\n            \r\n            dispatch({\r\n              type: ActionType.GET_TASKS,\r\n              payload: payload\r\n            });\r\n      \r\n        } catch (err) {\r\n            console.log(err);\r\n        }    \r\n    }\r\n}\r\n\r\nexport const addSelectedTasks = (tasks : ITask[]) => {\r\n    return async (dispatch: Dispatch<Action>) => {\r\n        dispatch({\r\n            type: ActionType.ADD_TASKS,\r\n            payload: tasks\r\n        });\r\n    }\r\n}\r\n\r\nexport const deleteTasks = (tasks : ITask[]) => {\r\n    return async (dispatch: Dispatch<Action>) => {\r\n        dispatch({\r\n            type: ActionType.DELETE_TASKS,\r\n            payload: tasks\r\n        });\r\n    }\r\n}","export enum ActionType {\n  GET_USERS = 'get_users',\n}\n    ","import { bindActionCreators } from \"redux\";\r\nimport { RootState } from \"../../../store/reducer\";\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { setLoadingState, addSelectedTasks, deleteTasks, getTaskTypes, getTasks, createPlan } from '../../../store/plan/actionsCreator';\r\nimport { PlanStateProps } from \"./planStateProps\";\r\n\r\nconst mapStateToProps = (state: RootState) : PlanStateProps  => ( {\r\n    planState : state.planReducer,\r\n    currentStep: 0\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch: any) =>\r\n    bindActionCreators({ addSelectedTasks, deleteTasks, getTaskTypes, getTasks, setLoadingState }, dispatch);\r\n\r\nconst filterTasksMapDispatchToProps = (dispatch: any) =>\r\n    bindActionCreators({ getTaskTypes, getTasks, setLoadingState }, dispatch);\r\n\r\nconst selectTasksMapDispatchToProps = (dispatch: any) =>\r\n    bindActionCreators({ addSelectedTasks, deleteTasks, setLoadingState }, dispatch);\r\n\r\nconst createPlanMapDispatchToProps = (dispatch: any) =>\r\n    bindActionCreators({ createPlan }, dispatch);\r\n\r\nexport const filterTasksConnector = connect(mapStateToProps, filterTasksMapDispatchToProps);\r\n\r\nexport const selectTasksConnector = connect(mapStateToProps, selectTasksMapDispatchToProps);\r\n\r\nexport const createPlanConnector = connect(mapStateToProps, createPlanMapDispatchToProps);\r\n\r\nexport const planConnector = connect(mapStateToProps, mapDispatchToProps);\r\n  \r\nexport type PlanProps = ConnectedProps<typeof planConnector>;\r\n\r\nexport type FilterTaskProps  = ConnectedProps<typeof filterTasksConnector>;\r\n\r\nexport type SelectTaskProps  = ConnectedProps<typeof selectTasksConnector>;\r\n\r\nexport type CreatePlanProps  = ConnectedProps<typeof createPlanConnector>;","import { Col, Row, Table, Timeline } from 'antd';\r\nimport Column from 'antd/lib/table/Column';\r\nimport { Key, TableRowSelection } from 'antd/lib/table/interface';\r\nimport React from 'react';\r\nimport { IPlanRoute } from '../../store/plan/actionTypes';\r\nimport { createPlanConnector, CreatePlanProps } from '../props/plan/planProps';\r\nimport { showError, showOperationSuccess } from '../tasks/helpers';\r\n\r\n\r\nclass CreatePlanStep extends React.Component<CreatePlanProps> {\r\n\r\n    componentDidMount () {\r\n        if (this.props.planState.planRoutes.length < 1) {\r\n        this.props.createPlan(this.props.planState.selectedTasks, this.props.planState.endDate, (err: Error) =>{\r\n            showError('title', err.message);\r\n        },\r\n        () =>  {\r\n            showOperationSuccess();\r\n        })\r\n    }\r\n    }\r\n\r\n    state = {\r\n        selectedRowKeys: [],\r\n    };\r\n\r\n    onSelectChange = (selectedRowKeys: Key[]) => {\r\n        console.log('selectedRowKeys changed: ', selectedRowKeys);\r\n        this.setState({ selectedRowKeys });\r\n    };\r\n\r\n    renderTimeLine() {\r\n        if (this.state.selectedRowKeys && this.state.selectedRowKeys.length > 0)\r\n        {\r\n            const route = this.props.planState.planRoutes.find(r => r.name === this.state.selectedRowKeys[0]) as IPlanRoute;\r\n            console.log(route);\r\n            return(\r\n                <Timeline>\r\n                    {\r\n                        \r\n                        route.tasks.map(task => \r\n                            <Timeline.Item color={task.arrivalDate > task.dueDate ? \"red\" : \"green\"} key={task.displayName}>\r\n                                <b>{task.displayName}</b>\r\n                                <p>Arrival date {task.arrivalDateValue.toLocaleTimeString()} - Due date {task.dueDateValue.toLocaleTimeString()}</p>\r\n                            </Timeline.Item>\r\n                            )\r\n                    }\r\n                </Timeline>\r\n          )\r\n        }\r\n        else {\r\n          return(<div>No Route selected</div>);\r\n        }\r\n    }\r\n\r\n  \r\n\r\n    render() {\r\n        const { planRoutes } = this.props.planState;\r\n        const { selectedRowKeys } = this.state;\r\n\r\n        const rowSelection: TableRowSelection<IPlanRoute>= {\r\n            selectedRowKeys,\r\n            type: 'radio',\r\n            onChange: this.onSelectChange,\r\n          };\r\n\r\n        return (\r\n            <div style={{background:\"white\" }}>\r\n                <Row>\r\n                    <Col span={12}>\r\n                        <Table rowSelection={rowSelection} dataSource={planRoutes} rowKey=\"name\"  pagination={false}>\r\n                            <Column title=\"Route\" key=\"name\" dataIndex=\"name\"/>\r\n                            <Column title=\"Total Distance\" dataIndex=\"totalDistance\" key=\"totalDistance\"  \r\n                                render={(text: number) => <span>{text}</span>} \r\n                            />\r\n                            <Column title=\"Failed\" key=\"failed\" dataIndex=\"failed\"\r\n                                render={(text: boolean) => <span>{text ? 'failed' : 'success'}</span>} \r\n                                />\r\n                        </Table>\r\n                    </Col>\r\n                    <Col span={2} >\r\n                        \r\n                    </Col>                    \r\n                    <Col span={8} style={{marginTop:25 }}>\r\n                        {this.renderTimeLine()}\r\n                    </Col>\r\n                    <Col span={2}>\r\n                        \r\n                    </Col>                    \r\n                </Row>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default createPlanConnector(CreatePlanStep)\r\n\r\n//<Column title=\"Plan\" key=\"name\" dataIndex=\"name\"/>","import { Button, Col, DatePicker, Form, FormInstance, Row, Select } from 'antd';\r\nimport Table from 'antd/lib/table';\r\nimport Column from 'antd/lib/table/Column';\r\nimport moment from 'moment';\r\nimport React from 'react';\r\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\r\nimport { ILocation, ITaskType, PlanState } from '../../store/plan/actionTypes';\r\nimport { FilterTaskProps, filterTasksConnector, PlanStateProps } from '../props/plan';\r\nconst { Option } = Select;\r\n\r\n\r\n/*id:number,\r\n    key: number,\r\n    name: string\r\n    location: ILocation | undefined,\r\n    dueDate: Date\r\n    duration: number */\r\n\r\n\r\nclass FilterTasksStep extends React.Component<FilterTaskProps, PlanState> {\r\n\r\n    formRef = React.createRef<FormInstance>();\r\n    \r\n    componentDidMount() {\r\n        if (this.props.planState.taskTypes.length < 1)\r\n            this.props.getTaskTypes();\r\n    }\r\n\r\n    onFinish = (values: any) => {\r\n        this.props.getTasks(values.taskTypeId,values.startDate.toDate(), values.endDate.toDate());\r\n    }\r\n\r\n    render() {\r\n        const firstTaskType = this.props.planState.taskTypeId < 0 ? undefined : this.props.planState.taskTypeId;\r\n        const dateFormat = 'yy-MM-DD';\r\n        const layout = {\r\n            labelCol: { span: 6 },\r\n            wrapperCol: { span: 18 },\r\n        };\r\n\r\n        return (<div>\r\n            <Form {...layout} initialValues={{ \r\n                    startDate: moment(this.props.planState.startDate).utc(), \r\n                    endDate: moment(this.props.planState.endDate).utc(), \r\n                    taskTypeId: firstTaskType\r\n                    }} ref={this.formRef} name=\"control-ref\" onFinish={this.onFinish}>\r\n                <Row gutter={{ xs: 8, sm: 16, md: 24, lg: 32 }}>\r\n                    <Col span={6}>\r\n                        <Form.Item label=\"Task type\" name=\"taskTypeId\" rules={[{ required: true, message: 'Please select a task type' }]}>\r\n                            <Select >\r\n                                {this.props.planState.taskTypes.map((taskType: ITaskType) => (<Option key={taskType.key} value={taskType.id}>{taskType.name}</Option>))}\r\n                            </Select>\r\n                        </Form.Item>\r\n                    </Col>\r\n                    <Col span={6}>\r\n                        <Form.Item label=\"Start Date\"name=\"startDate\">\r\n                            <DatePicker format={dateFormat} showTime style={{ width: '100%' }} />\r\n                        </Form.Item>\r\n                    </Col>\r\n                    <Col span={6}>\r\n                        <Form.Item label=\"End Date\" name=\"endDate\">\r\n                            <DatePicker format={dateFormat} showTime style={{ width: '100%' }} />\r\n                        </Form.Item>\r\n                    </Col>\r\n                    <Col span={6}>\r\n                        <Button key='buttonSave' type=\"primary\" htmlType=\"submit\">Search</Button>\r\n                    </Col>\r\n                </Row>\r\n            </Form>\r\n            <Table dataSource={this.props.planState.availableTasks}  >\r\n                <Column title=\"Name\" dataIndex=\"name\" key=\"name\" />\r\n                <Column title=\"Due Date\" dataIndex=\"dueDate\" key=\"dueDate\"  width='200'\r\n                    render={(text: Date) => <span>{moment(text).format('DD-MM-YYYY hh:mm')}</span>} \r\n                />\r\n                <Column title=\"Duration\" dataIndex=\"durationInSeconds\" key=\"durationInSeconds\" width='100'\r\n                    render={(text: number) => <span>{text / 60} min</span>} \r\n                />\r\n                <Column title=\"Location\" dataIndex=\"location\" key=\"location\"  ellipsis\r\n                    render={(loc: ILocation) => <span>{loc?.alias}</span>} \r\n                />\r\n            </Table>\r\n\r\n        </div>);\r\n    }\r\n}\r\n\r\n  \r\n\r\nexport default filterTasksConnector(FilterTasksStep)\r\n","import { Transfer } from 'antd';\r\nimport { TransferItem } from 'antd/lib/transfer';\r\nimport React from 'react';\r\nimport { ITask, PlanState } from '../../store/plan/actionTypes';\r\nimport { SelectTaskProps, selectTasksConnector } from '../props/plan/planProps';\r\n\r\ninterface SelectTasksStepState\r\n{\r\n    sourceTasks: TransferItem[],\r\n    selectedTasksKey : string[],\r\n    targetTasksKey : string[],\r\n}\r\n\r\nclass SelectTasksStep extends React.Component<SelectTaskProps, SelectTasksStepState> {\r\n\r\n    //target keys sao as que vao para o done step\r\n\r\n    constructor(props : SelectTaskProps) {\r\n        super(props);\r\n        this.state = {\r\n            sourceTasks: [] ,\r\n            selectedTasksKey: [],\r\n            targetTasksKey: []\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const transferItems : TransferItem[] = this.props.planState.availableTasks.map((task) =>  {\r\n            return {\r\n                key : task.key.toString(), \r\n                title: task.name, \r\n                description : task.location?.alias \r\n            };\r\n        });\r\n        const selectedItems : string[] = this.props.planState.selectedTasks.map((task) =>  task.key.toString());\r\n\r\n        this.setState({\r\n            sourceTasks: transferItems,\r\n            targetTasksKey : selectedItems\r\n        })\r\n    }\r\n\r\n    onChange = (nextTargetKeys: string[], direction: string, moveKeys: string[]) => {\r\n        this.setState({\r\n            targetTasksKey : nextTargetKeys\r\n        })\r\n\r\n        if (direction === 'left')\r\n            this.props.deleteTasks(moveKeys.map(k => this.props.planState.availableTasks.find(t => t.key.toString() === k) as ITask))\r\n        else if (direction === 'right')\r\n            this.props.addSelectedTasks(moveKeys.map(k => this.props.planState.availableTasks.find(t => t.key.toString() === k) as ITask))\r\n    };\r\n\r\n    onSelectChange = (sourceSelectedKeys : string[], targetSelectedKeys: string[]) => {\r\n        this.setState({\r\n            selectedTasksKey : [...sourceSelectedKeys, ...targetSelectedKeys]\r\n        })\r\n    };\r\n \r\n    render() {\r\n        return (<div>\r\n            <Transfer \r\n                dataSource={this.state.sourceTasks}\r\n                targetKeys={this.state.targetTasksKey}\r\n                selectedKeys={this.state.selectedTasksKey}\r\n                titles={['Tasks excluded', 'Tasks to include on plan']}\r\n                onChange={this.onChange}\r\n                onSelectChange={this.onSelectChange}\r\n                render={item =>  <span>{item.title} - {item.description} </span>}\r\n            />\r\n        </div>);\r\n    }\r\n}\r\n\r\nexport default selectTasksConnector(SelectTasksStep)","import { Steps, Button, PageHeader } from 'antd';\r\nimport { throws } from 'assert';\r\nimport React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { PlanProps, PlanStateProps , PlanRouteComponentPros, planConnector} from '../props/plan/index';\r\nimport CreatePlanStep from './CreatePlanStep';\r\nimport FilterTasksStep from './FilterTasksStep';\r\nimport SelectTasksStep from './SelectTasksStep';\r\nconst { Step } = Steps;\r\n\r\n\r\n\r\nclass Plan extends React.Component<PlanProps & PlanRouteComponentPros, PlanStateProps> {\r\n\r\n    constructor(props : PlanProps & PlanRouteComponentPros){\r\n        super(props);\r\n   \r\n        this.state = {\r\n            planState: props.planState,\r\n            currentStep : 0\r\n        }\r\n    }\r\n\r\n    onCancel = () => {\r\n        this.props.history.goBack();\r\n    }\r\n\r\n    onNext = () => {\r\n        this.setState({\r\n            currentStep: this.state.currentStep + 1,\r\n        });\r\n    }\r\n\r\n    onPrevious = () => {\r\n        this.setState({\r\n            currentStep: this.state.currentStep - 1,\r\n        });\r\n    }\r\n\r\n    onFinish = () => {\r\n\r\n    }\r\n\r\n    \r\n\r\n    render() {\r\n        const title = this.props.match.params.id  !== undefined ? 'Edit plan' : 'Create new plan';\r\n        const description = 'Fill the steps to create a plan';//this.state.taskType.id > 0 ? `${this.state.taskType.name}` : '';\r\n        console.log(this.props.planState);\r\n        return (<div>\r\n            <PageHeader\r\n                style={{ paddingLeft : 0, paddingRight : 0}}\r\n                onBack={this.props.planState.loading ? undefined : this.onCancel}\r\n                title={title}\r\n                subTitle={description}\r\n                extra={[\r\n                    <Button disabled={this.props.planState.loading} key='buttonSave' type=\"primary\" htmlType=\"submit\">Save</Button> ,\r\n                    <Button disabled={this.props.planState.loading} key='buttonCancel' type='ghost' onClick={this.onCancel}  >Cancel</Button> \r\n                ]}>  \r\n            </PageHeader>\r\n            <Steps current={this.state.currentStep}>\r\n                {this.steps.map(item => (\r\n                    <Step key={item.title} title={item.title} />\r\n                ))}\r\n            </Steps>\r\n            <div className=\"steps-content\">{this.steps[this.state.currentStep].content}</div>\r\n            <div className=\"steps-action\">\r\n                {this.state.currentStep > 0 && (\r\n                    <Button style={{ margin: '0 8px' }} onClick={() => this.onPrevious()} >\r\n                        Previous\r\n                    </Button>\r\n                )}\r\n                {this.state.currentStep < this.steps.length - 1 && (\r\n                    <Button type=\"primary\" onClick={() => this.onNext()} disabled={this.nextButtonDisableState()}> \r\n                        Next\r\n                    </Button>\r\n                )}\r\n                {this.state.currentStep === this.steps.length - 1 && (\r\n                    <Button type=\"primary\" >\r\n                        Done onClick={() => this.onFinish()}\r\n                    </Button>\r\n                )}\r\n            </div>\r\n        </div>);\r\n    }\r\n\r\n    nextButtonDisableState= () : boolean => {\r\n        if (this.state.currentStep === 0) {\r\n            return this.props.planState.availableTasks.length < 1;\r\n        }\r\n\r\n        if (this.state.currentStep === 1) {\r\n            return this.props.planState.selectedTasks.length < 1;\r\n        }\r\n        return true;\r\n    }\r\n    readonly steps = [\r\n        {\r\n          title: 'Filter Tasks',\r\n          content: (<FilterTasksStep />),\r\n        },\r\n        {\r\n          title: 'Select Tasks',\r\n          content: (<SelectTasksStep/>),\r\n        },\r\n        {\r\n          title: 'Choose Plan',\r\n          content: (<CreatePlanStep/>)\r\n        },\r\n      ];\r\n}\r\n\r\nexport default withRouter(planConnector(Plan));","import { ActionType } from \"./actionTypes\"\nimport { Dispatch } from 'redux';\nimport axios from 'axios';\n\nexport interface IUser {\n    key: number,\n    id: number,\n    firstName: string\n    lastName: string\n    email: string\n  }\n  \n  export type UsersState = {\n    users : IUser[]\n  }\n\n\n  export type GetUsersAction = {\n    type: ActionType.GET_USERS\n    payload: IUser[]\n  }\n  \nexport type Action =\n    | GetUsersAction;\n\nexport const getUsers = () => {\n  return async (dispatch: Dispatch<Action>) => {\n    try {\n      const { data } = await axios.get('http://tskrai-api.azurewebsites.net/user', {\n          params: {\n            availabilityStartDate: null,\n            availabilityEndDate: null,\n            latitude: null,\n            longitude : null,\n            name :null\n         }\n      });\n      \n      dispatch({\n        type: ActionType.GET_USERS,\n        payload: data.map((user :IUser, index: number) => { \n          user.key = index;\n          return user;\n        }),\n      });\n    } catch (err) {\n      console.log(err);\n    }    \n  }\n}","import React from 'react';\r\nimport { Dispatch } from \"redux\"\r\nimport { Action, getUsers, IUser, UsersState } from '../../store/users/actionsCreator';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { bindActionCreators , compose} from 'redux';\r\nimport Table, { ColumnsType } from 'antd/lib/table/Table';\r\nimport { ColumnType } from 'antd/lib/table';\r\nimport { Button, PageHeader, Space } from 'antd';\r\nimport { RootState } from '../../store/reducer';\r\n\r\nimport {withRouter, RouteComponentProps} from 'react-router-dom';\r\n\r\n\r\nconst mapStateToProps = (state: RootState) => ( {\r\n  users : state.usersReducer.users\r\n})\r\n\r\n\r\n  const mapDispatchToProps = (dispatch: any) =>\r\n    bindActionCreators({ getUsers }, dispatch);\r\n\r\n  const connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\n\r\n\r\n\r\n  type HeaderProps = ConnectedProps<typeof connector>;\r\n\r\nclass UserList extends React.Component<HeaderProps & RouteComponentProps> {\r\n\r\n  static get Columns() : ColumnType<IUser>[] { \r\n    return [\r\n      {\r\n        title: 'Name',\r\n        dataIndex: 'firstName',\r\n        key: 'firstName',\r\n      },\r\n      {\r\n        title: '',\r\n        dataIndex: 'lastName',\r\n        key: 'lastName',\r\n      },\r\n      {\r\n        title: 'Email',\r\n        dataIndex: 'email',\r\n        key: 'email',\r\n        ellipsis: true,\r\n      },\r\n      {\r\n        title: 'Action',\r\n        key: 'action',\r\n        render: (text, record) => (\r\n          <Space size=\"middle\">\r\n            <a>Edit</a>\r\n          </Space>\r\n        ),\r\n      },\r\n    ];\r\n  } \r\n    componentDidMount() {\r\n      console.log('mount');\r\n        this.props.getUsers();\r\n        \r\n    }\r\n\r\n    renderView(data : IUser[] ) {\r\n      console.log(data);\r\n      if (data && data.length > 0)\r\n      {\r\n        console.log('table');\r\n        const col = UserList.Columns;\r\n        return(<Table dataSource={data} columns={col} />);\r\n      }\r\n      else {\r\n        console.log('empty');\r\n        return(<div>Empty</div>);\r\n      }\r\n    }\r\n    \r\n    render() {\r\n      const  { users }   = this.props;\r\n\r\n\r\n      return(\r\n        <div>\r\n          <PageHeader\r\n            style={{ paddingLeft: 0, paddingRight: 0}}\r\n            className=\"site-page-header\"\r\n            title=\"List of tasks\"\r\n             subTitle=\"\"\r\n            extra={[\r\n              <Button key='buttonAdd' type=\"primary\">Add New</Button> \r\n            ]}>  \r\n        </PageHeader>\r\n          {this.renderView(users)}\r\n        </div>\r\n      )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(UserList));","import \"mapbox-gl/dist/mapbox-gl.css\";\r\nimport \"react-map-gl-geocoder/dist/mapbox-gl-geocoder.css\";\r\nimport React, { Component } from \"react\";\r\nimport MapGL from \"react-map-gl\";\r\nimport DeckGL, { GeoJsonLayer } from \"deck.gl\";\r\nimport Geocoder from \"react-map-gl-geocoder\";\r\n\r\nconst MAPBOX_TOKEN =\r\n  \"pk.eyJ1IjoicmljYXJkb3J1aWh1Z28iLCJhIjoiY2tsbTV1d2MxMDY2YzJvbXV0NGEycTJ5NiJ9.AmApz0qLG8oVZGXdVkJWWQ\";\r\n\r\n\r\nclass MapView extends Component {   \r\n\r\n     \r\n    constructor(props) {\r\n      super(props);\r\n      this.onLocationSelected = props.onLocationSelected;\r\n    }\r\n    state = {\r\n      viewport: {\r\n        width: 752,\r\n        height: 450,\r\n        latitude: 37.7577,\r\n        longitude: -122.4376,\r\n        zoom: 8\r\n      },\r\n      searchResultLayer: null\r\n    };\r\n  \r\n    mapRef = React.createRef();\r\n    geocoderContainerRef = React.createRef();\r\n  \r\n    componentDidMount() {\r\n      window.addEventListener(\"resize\", this.resize);\r\n      this.resize();\r\n    }\r\n\r\n\r\n  \r\n    componentWillUnmount() {\r\n      window.removeEventListener(\"resize\", this.resize);\r\n    }\r\n  \r\n    resize = () => {\r\n      this.handleViewportChange({\r\n        width: 752,//window.innerWidth,\r\n        height: 450//window.innerHeight\r\n      });\r\n     \r\n    };\r\n  \r\n    handleViewportChange = viewport => {\r\n      this.setState({\r\n        viewport: { ...this.state.viewport, ...viewport }\r\n      });\r\n    };\r\n  \r\n    // if you are happy with Geocoder default settings, you can just use handleViewportChange directly\r\n    handleGeocoderViewportChange = viewport => {\r\n      const geocoderDefaultOverrides = { transitionDuration: 1000 };\r\n  \r\n      return this.handleViewportChange({\r\n        ...viewport,\r\n        ...geocoderDefaultOverrides\r\n      });\r\n    };\r\n  \r\n    createResult = (eventResult) => {\r\n      var result = {};\r\n      if (eventResult.address) {\r\n        result.door = eventResult.address;\r\n      }\r\n\r\n      eventResult.context.forEach(element => {\r\n        if (element.id.startsWith(\"postcode\")) {\r\n          result.zipCode = element.text;\r\n        }\r\n        if (element.id.startsWith(\"locality\")) {\r\n          result.locality = element.text;\r\n        }\r\n        if (element.id.startsWith(\"region\")) {\r\n          result.city = element.text;\r\n        }\r\n        if (element.id.startsWith(\"country\")) {\r\n          result.country = element.text;\r\n        }\r\n      });\r\n\r\n      result.alias = eventResult.place_name;\r\n      result.street = eventResult.text;\r\n      result.longitude = eventResult.geometry.coordinates[0];\r\n      result.latitude = eventResult.geometry.coordinates[1];\r\n      result.id = 0;\r\n\r\n\r\n      return result;\r\n    }\r\n    handleOnResult = event => {\r\n      this.onLocationSelected(this.createResult(event.result));\r\n        console.log(event.result);\r\n      this.setState({\r\n        searchResultLayer: new GeoJsonLayer({\r\n          id: \"search-result\",\r\n          data: event.result.geometry,\r\n          getFillColor: [255, 0, 0, 128],\r\n          getRadius: 1000,\r\n          pointRadiusMinPixels: 10,\r\n          pointRadiusMaxPixels: 10\r\n        })\r\n      });\r\n    };\r\n  \r\n    render() {\r\n      const { viewport, searchResultLayer } = this.state;\r\n      \r\n      return (\r\n        <div>\r\n          <div\r\n            ref={this.geocoderContainerRef}\r\n            style={{\r\n              height: 50,\r\n              background: \"black\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              paddingLeft: 6,\r\n              paddingRight: 6\r\n            }}\r\n          />\r\n          <MapGL\r\n            ref={this.mapRef}\r\n            {...viewport}\r\n            onViewportChange={this.handleViewportChange}\r\n            mapboxApiAccessToken={MAPBOX_TOKEN}\r\n          >\r\n            <Geocoder\r\n              mapRef={this.mapRef}\r\n              containerRef={this.geocoderContainerRef}\r\n              onResult={this.handleOnResult}\r\n              onViewportChange={this.handleGeocoderViewportChange}\r\n              mapboxApiAccessToken={MAPBOX_TOKEN}\r\n            />\r\n            <DeckGL {...viewport} layers={[searchResultLayer]} />\r\n          </MapGL>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n  \r\n  export default MapView;","import { Button, Col, DatePicker, Divider, Form, FormInstance, Input, Modal, PageHeader, Row, Select, TimePicker } from 'antd';\nimport TextArea from 'antd/lib/input/TextArea';\nimport axios from 'axios';\nimport React, { ChangeEvent } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { ITask } from '../../store/tasks/actionTypes';\nimport MapView from '../map/MapView';\nimport { ITaskModel, TaskRouteComponentProps } from '../props/tasks/index';\nimport debounce from 'lodash/debounce';\nimport { ILocation } from '../../store/locations/location';\nimport { toNumber } from 'lodash';\nimport { showError, showOperationSuccess } from './helpers';\nimport { globalSettings } from '../../global';\nimport moment from 'moment';\n\ninterface ITaskState {\n  task: ITaskModel,\n  showModalLocation: boolean;\n  locationOptions: ILocationValueType[],\n  fullLocationOptions: ILocation[],\n  newLocation: ILocation | undefined,\n  selectedLocation: ILocationValueType | undefined,\n  userDefinedLocations: ILocation[],\n  floor: string,\n  userAlias: string,\n}\n\ninterface ILocationValueType {\n  label: string;\n  value: string;\n  key: string;\n}\n\nconst initialTaskModel : ITaskModel = {\n  location: undefined,\n  date: new Date(),\n  dueDate: new Date(),\n  notes: undefined,\n  name:'',\n  duration :600,\n  id: -1,\n  key : -1,\n  typeId: 1,\n  momentDuration : moment({minutes : 10}),\n  momentDate : moment(),\n  momentDueDate : moment()\n};\n\nclass NewTask extends React.Component<TaskRouteComponentProps, ITaskState> {\n  formRef = React.createRef<FormInstance>();\n\n  constructor(props: TaskRouteComponentProps) {\n    super(props);\n\n    this.state = {\n      newLocation: undefined,\n      locationOptions: [],\n      fullLocationOptions: [],\n      selectedLocation: undefined,\n      showModalLocation: false,\n      userDefinedLocations: [],\n      floor: '',\n      userAlias: '',\n      task: initialTaskModel\n    };\n  }\n\n  componentDidMount() {\n    if(this.props.match.params.id !== undefined) {\n      this.getTask(this.props.match.params.id);\n  }\n  }\n\n  // On edit mode get the task type\n  async getTask(id: string)  {\n    //this.props.setLoadingState(true);\n    \n    axios.get(`${globalSettings.ApiAdress}tasks/${id}`)\n    .then(({data}) =>  {\n        //this.props.setLoadingState(false);\n        this.onTaskFetched(data as ITask);\n    })\n    .catch((err: Error) => {\n        //this.props.setLoadingState(false);\n        showError('Error loading task.', err.message)\n    });\n  }\n  \n  onTaskFetched (data:ITask) {\n\n    let date: Date = new Date(data.duration * 1000);\n    const momentDuration = moment(date).utc();\n    const momentDueDate = moment(data.dueDate).utc();\n    const momentDate = moment(data.date).utc();\n\n    if (data.location === undefined)\n    {\n      this.setState({\n        task :  {...data, momentDuration, momentDate, momentDueDate } \n      });\n      return;\n    }\n\n    var location = {\n      value: data.location.id.toString(),\n      label: data.location.alias,\n      key: data.location.id.toString()\n    };\n\n    console.log(location);\n    const { locationOptions } = this.state;\n\n    this.setState({\n      locationOptions: [...locationOptions, location],\n      selectedLocation: location,\n      task :  {...data, momentDuration, momentDate, momentDueDate } \n    });\n\n    \n    //must be done because of initial values of form that aren't updated.\n    this.formRef.current?.resetFields();\n}\n\n  //debounce search 0.6 seconds to allow the user to input the full search string\n  deboucedSearch =\n    debounce((location) => this.onFetchLocation(location), 600);\n\n  //fetch locations\n  onFetchLocation = (location: string) => {\n    if (!location || location.trim() === \"\") {\n      return;\n    }\n\n    this.setState({\n      fullLocationOptions: [],\n      locationOptions: []\n    });\n\n    axios.get(`https://tskrai-api.azurewebsites.net/locations?alias=${location}`)\n      .then(({ data }) => {\n        const locations: ILocation[] = data.items;\n\n        const locationOptions: ILocationValueType[] = locations.map((location: ILocation) => {\n          return { key: location.id.toString(), label: location.alias, value: location.id.toString() }\n        });\n\n        //add locations that user defined\n        if (this.state.userDefinedLocations) {\n          this.state.userDefinedLocations.forEach(location => locationOptions.push(\n            { key: location.id.toString(), label: location.alias, value: location.id.toString() }\n          ))\n        }\n\n        this.setState({\n          locationOptions: locationOptions,\n          fullLocationOptions: locations\n        });\n\n        console.log('fetched');\n      })\n      .catch(function (error) {\n        console.log(`onFetchLocationcoco : ${error}`);\n      });\n  }\n\n\n  showSearchLocation = () => {\n    this.setState({ showModalLocation: true });\n  }\n\n  createIdForLocation = (): number => {\n    console.log(`length : ${this.state.userDefinedLocations.length}`);\n    if (this.state.userDefinedLocations.length < 1)\n      return -1;\n\n    const result = Math.min.apply(null, this.state.userDefinedLocations.map((loc) => loc.id)) - 1;\n    console.log(`result : ${result}`);\n    return result\n  }\n  closeSearchLocation = () => {\n    this.setState({ showModalLocation: false });\n\n    if (!this.state.newLocation) {\n      return;\n    }\n\n    const { newLocation } = this.state;\n    newLocation.id = this.createIdForLocation();\n    newLocation.floor = this.state.floor;\n    newLocation.alias = this.state.userAlias;\n    newLocation.userAlias = this.state.userAlias;\n\n    this.setState({ newLocation: newLocation });\n\n    var location = {\n      value: this.state.newLocation.id.toString(),\n      label: this.state.newLocation.alias,\n      key: this.state.newLocation.id.toString()\n    };\n\n    const { userDefinedLocations, locationOptions } = this.state;\n\n    this.setState({\n      userDefinedLocations: [...userDefinedLocations, this.state.newLocation],\n      locationOptions: [...locationOptions, location],\n      selectedLocation: location\n    });\n\n  }\n\n\n  onLocationSelected = (location: ILocation) => {\n    this.setState({ newLocation: location })\n  }\n\n  onCancel = () => {\n    this.props.history.goBack();//push('/tasklist/new')\n  }\n\n\n  onChangeLocationFloor = (floor: ChangeEvent<HTMLInputElement>) => {\n    this.setState({ floor: floor.target.value })\n  }\n\n  onChangeLocationUserAlias = (alias: ChangeEvent<HTMLInputElement>) => {\n    this.setState({ userAlias: alias.target.value })\n  }\n\n  findLocation = (locationValueType: ILocationValueType | undefined): ILocation | undefined => {\n    if (locationValueType === undefined) {\n      return undefined;\n    }\n\n    const id = toNumber(locationValueType.value);\n    let location = this.state.fullLocationOptions.find(loc => loc.id === id);\n    if (location === undefined) {\n      location = this.state.userDefinedLocations.find(loc => loc.id === id);\n    }\n    return location;\n  }\n\n  onFinish = (values: any) => {\n    console.log(values);\n\n    const task: ITask = {\n      id: -1,\n      date: values.date.toDate(),\n      dueDate: values.dueDate.toDate(),\n      duration: (values.duration.hours() * 60) + values.duration.minutes(),\n      key: -1,\n      location: this.findLocation(this.state.selectedLocation),\n      name: values.name,\n      notes: values.notes,\n      typeId: values.typeId\n    }\n    console.log(task);\n    axios.post('https://tskrai-api.azurewebsites.net/tasks', task)\n      .then((response) => {\n        showOperationSuccess();\n        this.props.history.goBack();\n      })\n      .catch((error) => {\n        const errorMessage = (this.props.match.params.id !== undefined) ? 'Error updating task.' : 'Error creating task.';\n        showError(errorMessage, error.message);\n      });\n  };\n\n\n\n  render() {\n    const options = [{ label: 'Cleaning', value: 1 },\n    { label: 'CheckIn', value: 2 },\n    { label: 'Delivery', value: 3 }]\n    const timeFormat = 'HH:mm';\n    const dateFormat = 'yy-MM-DD HH:mm';\n    const layout = {\n      labelCol: { span: 6 },\n      wrapperCol: { span: 18 },\n    };\n    const freeText = { span: 3 };\n    const title = this.props.match.params.id  !== undefined ? 'Edit task' : 'Create new task';\n    const description = this.state.task.id > 0 ? `${this.state.task.name}` : '';\n    const { locationOptions, selectedLocation } = this.state;\n    return (<div>\n      <Form {...layout} ref={this.formRef} name=\"control-ref\" onFinish={this.onFinish}\n        initialValues={{ \n          name: this.state.task.name, \n          typeId: this.state.task.typeId,\n          duration: this.state.task.momentDuration,\n          date: this.state.task.momentDate,\n          dueDate: this.state.task.momentDueDate,\n          notes : this.state.task.notes,\n          location: selectedLocation  }} >\n        <PageHeader\n\n          onBack={this.onCancel}\n          title={title}\n          subTitle={description}\n          extra={[\n            <Button key='buttonSave' type=\"primary\" htmlType=\"submit\">Save</Button>,\n            <Button key='buttonCancel' type='ghost' onClick={this.onCancel}  >Cancel</Button>\n          ]}>\n        </PageHeader>\n        <div>\n          <Row gutter={{ xs: 8, sm: 16, md: 24, lg: 32 }}>\n            <Col span={12}>\n              <Form.Item label=\"Name\"name=\"name\" rules={[{ required: true, message: 'Please input task name!' }]}>\n                <Input />\n              </Form.Item>\n            </Col>\n            <Col className=\"gutter-row\" span={12}>\n              <Form.Item label=\"Task type\" name=\"typeId\" rules={[{ required: true, message: 'Please select a task type' }]}>\n                <Select\n                  placeholder=\"Select a type\"\n                  options={options}\n                  allowClear>\n                </Select>\n              </Form.Item>\n            </Col>\n          </Row>\n          <Row gutter={{ xs: 8, sm: 16, md: 24, lg: 32 }}>\n            <Col span={12}>\n              <Form.Item label=\"Date\" name=\"date\" rules={[{ required: true, message: 'Please select a date to execute the task.' }]}>\n                <DatePicker showTime style={{ width: '100%' }} />\n              </Form.Item>\n            </Col>\n            <Col className=\"gutter-row\" span={12}>\n              <Form.Item\n                label=\"Location\"\n                name=\"location\"\n                rules={[{ required: true, message: 'Please select the location of the task.' }]}>\n                <Select<ILocationValueType>\n                  labelInValue\n\n                  showSearch\n                  onSearch={this.deboucedSearch}\n                  placeholder=\"Search for a location\"\n                  showArrow={false}\n                  value={this.state.selectedLocation}\n                  onChange={newValue => {\n                    console.log(newValue);\n                    this.setState({ selectedLocation: newValue });\n                  }}\n                 \n                  allowClear\n                  options={locationOptions}\n                  dropdownRender={menu => (\n                    <div>\n                      {menu}\n                      <Divider style={{ margin: '4px 0' }} />\n                      <div style={{ display: 'flex', flexWrap: 'nowrap', padding: 2 }}>\n                        <Button type=\"link\" onClick={this.showSearchLocation}>Add item</Button>\n\n                      </div>\n                    </div>\n                  )}>\n                </Select>\n\n              </Form.Item>\n            </Col>\n          </Row>\n          <Modal\n            title=\"Enter Address to find the location\"\n            centered\n            visible={this.state.showModalLocation}\n            onOk={this.closeSearchLocation}\n            onCancel={this.closeSearchLocation}\n            width={800}\n          >\n            <MapView onLocationSelected={this.onLocationSelected}></MapView>\n            <Row>\n              <Col span={24}>\n                <div style={{ margin: '10px 0' }}>\n                  <span>Address:</span>\n                  <Input value={this.state.newLocation?.alias} readOnly />\n                </div>\n              </Col>\n            </Row>\n            <Row>\n              <Col span={16}>\n                <div style={{ margin: '5px 0' }}>\n                  <span>Alias:</span>\n                  <Input value={this.state.newLocation?.userAlias} onChange={this.onChangeLocationUserAlias} />\n                </div>\n              </Col>\n              <Col span={2}>\n\n              </Col>\n              <Col span={6}>\n                <div style={{ margin: '5px 0' }}>\n                  <span>Floor:</span>\n                  <Input value={this.state.newLocation?.floor} onChange={this.onChangeLocationFloor} />\n                </div>\n              </Col>\n            </Row>\n          </Modal>\n          <Row gutter={{ xs: 8, sm: 16, md: 24, lg: 32 }}>\n            <Col span={12}>\n              <Form.Item label=\"Due Date\"name=\"dueDate\">\n                <DatePicker format={dateFormat} showTime style={{ width: '100%' }} />\n              </Form.Item>\n            </Col>\n            <Col className=\"gutter-row\" span={12}>\n              <Form.Item label=\"Duration\" name=\"duration\">\n                <TimePicker minuteStep={5} format={timeFormat} style={{ width: '100%' }} />\n              </Form.Item>\n            </Col>\n          </Row>\n          <Row>\n            <Col className=\"gutter-row\" span={24}>\n              <Form.Item\n                labelCol={freeText}\n                wrapperCol={{ span: 21 }}\n                label=\"Notes\"\n                name=\"notes\">\n                <TextArea\n                  style={{ width: '100%' }}\n                  placeholder=\"Additional information\"\n                  autoSize={{ minRows: 3, maxRows: 5 }}\n                />\n              </Form.Item>\n            </Col>\n          </Row>\n        </div>\n      </Form>\n    </div>);\n  }\n}\n\nexport default withRouter(NewTask);","import { Button, Col, Form, FormInstance, Input, InputNumber, PageHeader, Row, TimePicker } from 'antd';\nimport axios from 'axios';\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { ITaskType } from '../../store/tasktypes/actionTypes';\nimport { globalSettings } from '../../global';\nimport moment from 'moment';\nimport { taskTypeconnector, TaskTypeRouteComponentPros, TaskTypesProps, ITaskTypeModel } from '../props/tasktypes/index';\nimport { showError, showOperationSuccess } from './helpers';\n\ntype TaskTypeState = {\n    taskType: ITaskTypeModel\n}\n\nconst initialTaskTypeModel : ITaskTypeModel = {\n    cost :0,\n    name:'',\n    duration :600,\n    id: -1,\n    key : -1,\n    momentDuration : moment({minutes : 10})\n};\n\nclass TaskType extends React.Component<TaskTypesProps & TaskTypeRouteComponentPros, TaskTypeState> {\n\n    formRef = React.createRef<FormInstance>();\n\n    constructor(props : TaskTypesProps & TaskTypeRouteComponentPros){\n        super(props);\n        this.state = {\n            taskType: initialTaskTypeModel,\n        }\n    }\n\n    componentDidMount() {   \n        if(this.props.match.params.id !== undefined) {\n            this.getTaskType(this.props.match.params.id);\n        }\n    }\n\n    // On edit mode get the task type\n    async getTaskType(id: string)  {\n        this.props.setLoadingState(true);\n        \n        axios.get(`${globalSettings.ApiAdress}tasktypes/${id}`)\n        .then(({data}) =>  {\n            this.props.setLoadingState(false);\n            this.onTaskTypeFetched(data as ITaskType);\n        })\n        .catch((err: Error) => {\n            this.props.setLoadingState(false);\n            showError('Error loading task type.', err.message)\n        });\n    } \n\n    onTaskTypeFetched (data:ITaskType) {\n        const date: Date = new Date(data.duration * 1000);\n        const momentDuration = moment(date).utc();\n        this.setState({\n            taskType :  {...data, momentDuration} \n        })\n        //must be done because of initial values of form that aren't updated.\n        this.formRef.current?.resetFields();\n    }\n\n    onFinish = (values: any) => {\n        const task : ITaskType = {\n            key: this.state.taskType.key,\n            id: this.state.taskType.id,\n            cost: values.cost,\n            duration : ((values.duration.hours() * 60) + values.duration.minutes()) * 60,\n            name : values.name,\n        }\n\n        this.props.upsertTaskType(task, \n            (err: Error) =>{\n                const errorMessage = (this.props.match.params.id !== undefined) ? 'Error updating task type.': 'Error creating task type.';\n                showError(errorMessage, err.message);\n            },\n            () =>  {\n                showOperationSuccess();\n                this.props.history.goBack();\n            }\n        );\n      };\n\n    onCancel = () => {\n        this.props.history.goBack();\n    }\n\n    render() {\n        const timeFormat = 'HH:mm';\n        const title = this.props.match.params.id  !== undefined ? 'Edit task type' : 'Create new task type';\n        const description = this.state.taskType.id > 0 ? `${this.state.taskType.name}` : '';\n        if (!this.state.taskType) {\n            return (<div>Loading</div>);\n        }\n        else if (this.state.taskType) {\n            return(<div>\n                <Form initialValues={{ \n                    name: this.state.taskType.name, \n                    cost: this.state.taskType.cost,\n                    duration: this.state.taskType.momentDuration }} \n                    ref={this.formRef} name=\"control-ref\" onFinish={this.onFinish}>\n                    <PageHeader\n                        style={{ paddingLeft : 0, paddingRight : 0}}\n                        onBack={this.props.taskTypesState.loading ? undefined : this.onCancel}\n                        title={title}\n                        subTitle={description}\n                        extra={[\n                            <Button disabled={this.props.taskTypesState.loading} key='buttonSave' type=\"primary\" htmlType=\"submit\">Save</Button> ,\n                            <Button disabled={this.props.taskTypesState.loading} key='buttonCancel' type='ghost' onClick={this.onCancel}  >Cancel</Button> \n                        ]}>  \n                    </PageHeader>\n                  <div>\n                    <Row gutter={{ xs: 8, sm: 16, md: 24, lg: 32 }}>\n                        <Col span={24}>\n                          <Form.Item\n                            label=\"Name\"\n                            name=\"name\"\n                            rules={[{ required: true, message: 'Please input task type name!' }]}>\n                            <Input style={{ width: '100%' }} placeholder=\"brief task type name\"/>\n                          </Form.Item>\n                        </Col>\n                    </Row>\n                    <Row gutter={{ xs: 8, sm: 16, md: 24, lg: 32 }}>\n                        <Col span={12}>\n                          <Form.Item\n                            label=\"Cost\"\n                            name=\"cost\">\n                            <InputNumber  min={0} style={{ width: '100%' }}/>\n                          </Form.Item>\n                        </Col>\n                        <Col className=\"gutter-row\" span={12}>\n                          <Form.Item\n                            label=\"Duration\"\n                            name=\"duration\">\n                             <TimePicker minuteStep={5} format={timeFormat} style={{ width: '100%' }} />\n                          </Form.Item>\n                        </Col>\n                    </Row>\n                  </div>\n                  </Form>\n                  </div>\n                  \n                  );\n        }\n        else {\n            return(<div>Erros aconteceram.</div>);\n        }  \n    }\n}\n\nexport default withRouter(taskTypeconnector(TaskType));","export const RootPath: string = '/';//'/tskrai-dash';\r\n\r\nexport const RouteTaskList : string = `${RootPath}tasklist`;\r\nexport const RouteTaskEdit : string = `${RootPath}tasklist/task/:id?`;\r\n\r\nexport const RouteTaskTypeList : string = `${RootPath}tasktypelist`;\r\nexport const RouteTaskTypeEdit : string = `${RootPath}tasktypelist/tasktype/:id?`;\r\n\r\nexport const RouteUserList : string = `${RootPath}users`;\r\n\r\nexport const RoutePlanList : string = `${RootPath}planlist`;\r\nexport const RoutePlanEdit : string = `${RootPath}planlist/plan/:id?`;","import React from 'react';\nimport './App.less';\nimport { Avatar, Badge, Layout, Menu } from 'antd';\nimport { Route, Link , Switch, useLocation } from 'react-router-dom';\nimport TaskList from './pages/tasks/TaskList';\nimport TaskTypeList from './pages/tasks/TaskTypeList';\nimport PlanList from './pages/plans/PlanList';\nimport Plan from './pages/plans/Plan';\nimport UserList from './pages/users/UserList';\nimport ruicarafeia from './assets/ruisilva.jpeg';\nimport {\n  AppstoreOutlined,\n  DeploymentUnitOutlined,\n  UserOutlined,\n} from '@ant-design/icons';\nimport NewTask from './pages/tasks/NewTask';\nimport TaskType from './pages/tasks/TaskType';\nimport { RootPath, RoutePlanEdit, RoutePlanList, RouteTaskEdit, RouteTaskList, RouteTaskTypeEdit, RouteTaskTypeList, RouteUserList } from './routing/routes';\n\nconst { Header, Content, Sider} = Layout;\nconst { SubMenu } = Menu;\n\nfunction App( ) {\n  var currentLocation = window.location.pathname;\n  console.log(currentLocation);\n  const location = useLocation();\n  console.log(location)\n    return (\n  \n      <Layout>\n        <Header style={{ position: 'fixed', zIndex: 1, width: '100%', paddingLeft:10 , background: 'white'}}>\n          <div className=\"logo\" />\n          <div style={{ textAlign: 'right' , background:'white'}}>\n          <span style={{ marginRight: 20}} >Rui Silva</span>\n          <span className=\"avatar-item\">\n            <Badge count={1}>\n              <Avatar src={ruicarafeia} />\n            </Badge>\n          </span>\n          \n          </div>\n        </Header>\n      <Sider\n        style={{\n          background: 'white',\n          top: '64px',\n          overflow: 'auto',\n          height: '100vh',\n          position: 'fixed',\n          left: 0,\n        }}\n      >\n        <Menu theme=\"light\" mode=\"inline\" selectedKeys={[location.pathname]}>\n          <SubMenu key=\"sub1\" icon={<AppstoreOutlined />} title=\"Tasks\">\n                <Menu.Item key=\"/tasklist\" >Tasks\n                  <Link to={RouteTaskList} />\n                </Menu.Item>\n                <Menu.Item key=\"/tasktypelist\">Task types\n                  <Link to={RouteTaskTypeList} />\n                </Menu.Item>\n          </SubMenu>\n          <Menu.Item key=\"/users\" icon={<UserOutlined />}>\n            Users\n            <Link to={RouteUserList} />\n          </Menu.Item>\n          <Menu.Item key=\"/plans\" icon={<DeploymentUnitOutlined />}>\n            Plans\n            <Link to={RoutePlanList} />\n          </Menu.Item>\n        </Menu>\n      </Sider>\n      <Content  style={{ padding: '64px 50px 0px 50px',height: '100vh', marginLeft:180}}>\n        <Switch>\n          <Route exact path={RootPath} component={TaskList} />\n          <Route exact path={RouteTaskEdit} component={NewTask} />\n          <Route exact path={RouteTaskTypeEdit} component={TaskType} />\n          <Route exact path={RoutePlanEdit} component={Plan} />\n          <Route path={RouteTaskList} component={TaskList} />\n          <Route path={RouteTaskTypeList} component={TaskTypeList} />\n          <Route path={RouteUserList} component={UserList} />\n          <Route path={RoutePlanList} component={PlanList} />\n        </Switch>\n      </Content>\n    </Layout>\n\n  );\n}\n\nexport default App;\n","export default \"data:image/jpeg;base64,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\"","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { Action, AddTaskAction, GetTasksAction } from './actionsCreator'\r\nimport { ITask, TasksState } from './actionTypes'\r\nimport { ActionType} from \"./actionTypes\"\r\n\r\nconst initialState: TasksState = {\r\n  tasks : [],\r\n  pageSize : 10,\r\n  pageIndex : 0,\r\n  totalCount : 0,\r\n  loading: false\r\n}\r\n\r\nconst reducer = (\r\n    state: TasksState = initialState,\r\n    action: Action\r\n  ): TasksState => {\r\n    switch (action.type) {\r\n      case ActionType.GET_TASKS:\r\n        return {...state, \r\n          tasks: action.payload.tasks, \r\n          pageIndex : action.payload.pageIndex,\r\n          pageSize : action.payload.pageSize,\r\n          totalCount : action.payload.totalCount ,\r\n          loading : false };\r\n      case ActionType.ADD_TASK:\r\n        return state;\r\n      case ActionType.DELETE_TASK: \r\n        return {...state, loading: false, tasks: state.tasks.filter((task: ITask) => task.id !== action.payload) };\r\n      case ActionType.SET_LOADING:\r\n          return {...state, loading: action.payload };\r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n  \r\n  export default reducer;","import { Action, UsersState, GetUsersAction, IUser } from \"./actionsCreator\"\nimport { ActionType} from \"./actionTypes\"\n\nconst initialState: UsersState = {\n  users : []\n}\n\nconst reducer = (\n    state: UsersState = initialState,\n    action: Action\n  ): UsersState => {\n    switch (action.type) {\n      case ActionType.GET_USERS:\n        return {...state, users: action.payload };\n      default:\n        return state;\n    }\n  };\n  \n  export default reducer;","import { Action } from \"./actionsCreator\"\nimport { ActionType, ITaskType, TaskTypeState} from \"./actionTypes\"\n\nconst initialState: TaskTypeState = {\n  taskTypes : [],\n  pageSize : 10,\n  pageIndex : 0,\n  totalCount : 0,\n  loading: false,\n}\n\nconst reducer = (\n    state: TaskTypeState = initialState,\n    action: Action\n  ): TaskTypeState => {\n    switch (action.type) {\n      case ActionType.GET_TASK_TYPES:\n        return {...state, \n          loading: false,\n          taskTypes: action.payload.tasks, \n          pageIndex : action.payload.pageIndex,\n          pageSize : action.payload.pageSize,\n          totalCount : action.payload.totalCount };\n      case ActionType.SET_LOADING:\n        return {...state, loading: action.payload };\n      case ActionType.DELETE_TASK_TYPE:\n        return {...state, loading: false, taskTypes: state.taskTypes.filter((tasktype: ITaskType) => tasktype.id !== action.payload) };\n      case ActionType.UPSERT_TASK_TYPE:\n        let found: boolean = false;\n        const taskTypes = state.taskTypes.map((taskType)=> {\n          if( taskType.id === action.payload.id ) {\n            found = true;\n            return action.payload\n          } else {\n            return taskType;\n          }\n        });\n        return {...state, loading: false, taskTypes: found ? taskTypes : state.taskTypes.concat(action.payload)};\n      default:\n        return state;\n    }\n  };\n  \nexport default reducer;\n","import { Action } from \"./actionsCreator\"\r\nimport { ActionType, PlanState} from \"./actionTypes\"\r\n\r\nconst initialState: PlanState = {\r\n    taskTypes : [],\r\n    availableTasks: [],\r\n    selectedTasks : [],\r\n    loading: false,\r\n    taskTypeId : -1,\r\n    startDate: new Date(),\r\n    endDate: new Date(),\r\n    planRoutes: []\r\n}\r\n\r\nconst reducer = (\r\n      state: PlanState = initialState,\r\n      action: Action\r\n    ): PlanState => {\r\n    switch (action.type) {\r\n        case ActionType.GET_TASK_TYPES:\r\n            return {...state, \r\n                loading: false,\r\n                taskTypes: action.payload, \r\n            };\r\n        case ActionType.GET_TASKS:\r\n            return {...state, \r\n                loading: false, \r\n                availableTasks: action.payload,\r\n                selectedTasks: action.payload\r\n            };\r\n        case ActionType.SET_LOADING:\r\n            return {...state, \r\n                loading: action.payload \r\n            };\r\n        case ActionType.ADD_TASKS:\r\n            const selectedTasks = state.selectedTasks.concat(action.payload);\r\n            return {...state, \r\n                loading: false, \r\n                selectedTasks: Array.from(new Set(selectedTasks))\r\n            };\r\n        case ActionType.DELETE_TASKS:\r\n            const ids = action.payload.map((t)=> t.id);\r\n            return {...state, \r\n                loading: false, \r\n                selectedTasks: state.selectedTasks.filter((item) => ids.indexOf(item.id) < 0)\r\n            };\r\n        case ActionType.CREATE_PLAN:\r\n            console.log(action.payload);\r\n            return {...state, \r\n                planRoutes: action.payload\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n    \r\nexport default reducer;\r\n","import { combineReducers } from 'redux';\r\nimport tasksReducer from './tasks/reducer';\r\nimport usersReducer from './users/reducer';\r\nimport taskTypesReducer from './tasktypes/reducer';\r\nimport planReducer from './plan/reducer';\r\n\r\nconst reducers = combineReducers({\r\n  tasksReducer: tasksReducer,\r\n  usersReducer: usersReducer,\r\n  taskTypesReducer: taskTypesReducer,\r\n  planReducer: planReducer\r\n});\r\n\r\nexport default reducers;\r\n\r\nexport type RootState = ReturnType<typeof reducers>;","import { createStore, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport reducers from './reducer';\r\n\r\nexport const store = createStore(reducers, {}, applyMiddleware(thunk));\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter as Router} from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { store } from './store/store';\n\n\n//Temporary fix because antd : https://github.com/ant-design/ant-design/issues/22493\n\nReactDOM.render(\n  /*<React.StrictMode>*/\n    <Provider store={store}>\n      <Router>\n        <App />\n      </Router>\n    </Provider>\n  /*</React.StrictMode>*/,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}